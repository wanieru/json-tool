{"version":3,"file":"lib/json-tool.js","mappings":"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","sources":["webpack://@wanieru/json-tool/./js/JsonTool.js","webpack://@wanieru/json-tool/webpack/bootstrap","webpack://@wanieru/json-tool/./js/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JsonTool = void 0;\nclass JsonTool {\n    constructor(element, validator = null) {\n        var _a, _b;\n        this.containerElement = element;\n        this.validator = validator !== null && validator !== void 0 ? validator : (() => { return { valid: true }; });\n        this.schema = null;\n        this.root = document.createElement(\"div\");\n        this.root.style.fontFamily = \"monospace\";\n        this.root.style.marginLeft = \"30px\";\n        this.root.classList.add(\"json-tool\");\n        this.rootObject = null;\n        this.rootElement = null;\n        this.errorMessages = document.createElement(\"div\");\n        this.errorMessages.classList.add(\"json-tool-errors\");\n        const iframe = document.createElement(\"iframe\");\n        iframe.style.width = \"100%\";\n        iframe.style.height = \"100%\";\n        iframe.style.overflow = \"scroll\";\n        iframe.style.border = \"0\";\n        element.innerHTML = \"\";\n        element.appendChild(iframe);\n        this.iframeBody = (_b = (iframe.contentDocument || ((_a = iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.document))) === null || _b === void 0 ? void 0 : _b.querySelector(\"body\");\n        this.iframeBody.append(this.root);\n        this.createCss(this.iframeBody);\n        iframe.onload = () => {\n            var _a, _b;\n            this.iframeBody = (_b = (iframe.contentDocument || ((_a = iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.document))) === null || _b === void 0 ? void 0 : _b.querySelector(\"body\");\n            this.iframeBody.append(this.root);\n            this.createCss(this.iframeBody);\n            this.iframeBody.appendChild(this.errorMessages);\n        };\n    }\n    load(schema, value, validator) {\n        this.validator = validator !== null && validator !== void 0 ? validator : this.validator;\n        this.schema = schema;\n        this.root.innerHTML = \"\";\n        if (schema.title) {\n            const title = document.createElement(\"h3\");\n            title.textContent = schema.title;\n            JsonElement.addDescription(title, schema.description, schema === null || schema === void 0 ? void 0 : schema.examples);\n            this.root.appendChild(title);\n        }\n        this.rootObject = document.createElement(\"div\");\n        this.root.appendChild(this.rootObject);\n        this.rootElement = new JsonElement(this.rootObject, schema, value, () => this.onUpdate(), () => this.validate());\n        this.validate();\n    }\n    hide() {\n        this.containerElement.innerHTML = \"\";\n    }\n    setValidator(validator) {\n        this.validator = validator;\n    }\n    getValue() {\n        var _a;\n        return (_a = this.rootElement) === null || _a === void 0 ? void 0 : _a.getValue();\n    }\n    onUpdate() {\n        var _a;\n        if (!this.rootObject)\n            return;\n        let number = 1;\n        (_a = this.rootObject) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".line-number\").forEach(e => {\n            e.innerText = number.toString();\n            number++;\n        });\n        this.validate();\n    }\n    validate() {\n        window.setTimeout(() => {\n            var _a;\n            if (this.schema && this.errorMessages) {\n                const valid = this.validator(this.getValue(), this.schema);\n                this.errorMessages.innerHTML = \"\";\n                if (!valid.valid) {\n                    this.errorMessages.innerHTML = ((_a = valid.errors) !== null && _a !== void 0 ? _a : []).map(e => typeof e === \"string\" ? e : e.message).join(\"\\n\");\n                }\n            }\n        }, 1);\n    }\n    createCss(parent) {\n        const style = document.createElement(\"style\");\n        parent.appendChild(style);\n        style.innerHTML =\n            `\n            .json-tool-btn\n             {\n                border: 1px black solid;\n                cursor: pointer;\n                display: block;\n             }\n              .json-tool-block > .json-tool-btn {\n                margin-top: -17px;\n                margin-left: -40px;\n                position: absolute;\n                opacity: 0;\n              }\n              .json-tool-block:hover > .json-tool-btn\n              {\n                opacity: 1;\n              }\n              .json-tool-value > .json-tool-btn {\n                margin-left: 10px;\n                display: inline-block;\n                position: absolute;\n                opacity :0;\n              }\n              .json-tool-value:hover > .json-tool-btn\n              {\n                opacity :1;\n              }\n              .json-tool-key > .json-tool-btns {\n                margin-left: -32px;\n                display: inline-block;\n                position: absolute;\n                width: 32px;\n                text-align: right;\n                opacity: 0;\n              }\n              .json-tool-key:hover > .json-tool-btns\n              {\n                opacity: 1;\n              }\n\n              .json-tool-key > .json-tool-btns > .json-tool-btn {\n                display: inline-block;\n                margin-right: 2px;\n              }\n              .json-tool-value > .json-tool-type\n              {\n                float:right;\n                opacity: 0;\n                padding:0;\n                margin:0;\n                border:0;\n              }\n              .json-tool-value.json-tool-object > .json-tool-type\n              {\n                float:none;\n                position: absolute;\n                margin-left: 15px;\n              }\n              .json-tool-value:hover > .json-tool-type\n              {\n                opacity: 1;\n              }\n\n              .json-tool-block.opened > .json-tool-key {display: block}\n              .json-tool-block.closed > .json-tool-key {display: none}\n\n              .line-number\n              {\n                position: absolute;\n                left: 0;\n                text-align: right;\n                width: 20px;\n              }\n              .json-tool-value.json-tool-object > .line-number\n              {\n                margin-top: -15px;\n              }\n              .json-tool input, .json-tool select, .json-tool textarea\n              {\n                border: 0;\n                background-color: #ece9e9;\n                padding: 0;\n                margin: 1px;\n              }\n\n                .json-tool-errors {\n                    color: red;\n                    white-space: pre;\n                    font-family: monospace;\n                    line-height: 2em;\n                    font-weight: bold;\n                    font-size: 1.2em;\n                }\n`;\n    }\n}\nexports.JsonTool = JsonTool;\nclass JsonElement {\n    constructor(element, schema, value, onUpdate, validate) {\n        this.arrayElements = [];\n        this.objectElements = {};\n        this.element = element;\n        this.setStyle();\n        this.schema = schema;\n        this.onUpdate = onUpdate;\n        this.validate = validate;\n        this.currentValues = {};\n        this.types = schema ? JsonElement.getDefaultAvailableTypes(schema) : [];\n        const actualType = JsonElement.getType(value);\n        this.currentType = \"\";\n        if (actualType !== \"undefined\") {\n            this.currentType = actualType;\n            this.types.push(actualType);\n            this.setCurrentTypeValue(value);\n        }\n        else if (this.schema) {\n            const def = JsonElement.getDefaultValue(this.schema);\n            this.currentType = def.type;\n            this.setCurrentTypeValue(def.value);\n        }\n        this.types = [...new Set(this.types)];\n        this.updateElement();\n    }\n    setCurrentTypeValue(value) {\n        this.currentValues[this.currentType] = typeof value !== \"undefined\" ? JSON.parse(JSON.stringify(value)) : undefined;\n        if (this.validate)\n            this.validate();\n    }\n    static addDescription(element, description, examples) {\n        if (examples) {\n            description = `${description ? `${description}\\n` : \"\"}Examples:\\n${examples.map(e => JSON.stringify(e)).join(\",\\n\")}`;\n        }\n        if (description) {\n            element.title = description;\n            element.style.textDecoration = \"underline dotted\";\n            element.style.cursor = \"help\";\n        }\n    }\n    static getType(value) {\n        if (typeof value === \"undefined\")\n            return \"undefined\";\n        if (Array.isArray(value)) {\n            return \"array\";\n        }\n        else if (value === null) {\n            return \"null\";\n        }\n        else {\n            return typeof value;\n        }\n    }\n    static isInteger(schema) {\n        if (!schema)\n            return false;\n        const arr = Array.isArray(schema.type) ? schema.type : [schema.type];\n        return arr.includes(\"integer\") && !arr.includes(\"number\");\n    }\n    static getDefaultAvailableTypes(schema) {\n        let types = Array.isArray(schema.type) ? [...schema.type] : [schema.type];\n        types = types.map(t => {\n            if (t === \"integer\")\n                return \"number\";\n            return t;\n        });\n        return types;\n    }\n    static getDefaultValue(schema) {\n        const availableTypes = this.getDefaultAvailableTypes(schema);\n        if (typeof schema.default !== \"undefined\") {\n            return { type: this.getType(schema.default), value: schema.default };\n        }\n        else if (schema.examples && schema.examples.length > 0) {\n            return { type: this.getType(schema.examples[0]), value: schema.examples[0] };\n        }\n        else {\n            return { type: availableTypes[0], value: this.getDefaultValueForType(schema, availableTypes[0]) };\n        }\n    }\n    static getDefaultValueForType(schema, type) {\n        var _a, _b, _c;\n        if (type === \"null\") {\n            return null;\n        }\n        else if (type === \"number\") {\n            return this.isInteger(schema) ? Math.ceil((_a = schema === null || schema === void 0 ? void 0 : schema.minimum) !== null && _a !== void 0 ? _a : 0) : (_b = schema === null || schema === void 0 ? void 0 : schema.minimum) !== null && _b !== void 0 ? _b : 0;\n        }\n        else if (type === \"string\") {\n            if (schema === null || schema === void 0 ? void 0 : schema.enum)\n                return schema.enum[0];\n            if ((schema === null || schema === void 0 ? void 0 : schema.format) === \"color\")\n                return \"#000000\";\n            if ((schema === null || schema === void 0 ? void 0 : schema.format) === \"date\")\n                return new Date().toDateString();\n            return \"\";\n        }\n        else if (type === \"boolean\") {\n            return false;\n        }\n        else if (type === \"array\") {\n            return [];\n        }\n        else if (type === \"object\") {\n            const obj = {};\n            if (schema === null || schema === void 0 ? void 0 : schema.properties) {\n                for (const required of (_c = schema.required) !== null && _c !== void 0 ? _c : []) {\n                    if (!schema.properties.hasOwnProperty(required))\n                        continue;\n                    const def = this.getDefaultValue(schema.properties[required]);\n                    obj[required] = def.value;\n                }\n            }\n            return obj;\n        }\n    }\n    updateElement() {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2;\n        this.objectElements = {};\n        this.arrayElements = [];\n        this.element.innerHTML = \"\";\n        this.element.style.display = \"inline-block\";\n        this.element.classList.remove(\"json-tool-object\");\n        this.element.append(this.createLineNumber());\n        const type = this.currentType;\n        const val = (_a = this.currentValues[type]) !== null && _a !== void 0 ? _a : (this.currentValues[type] = JsonElement.getDefaultValueForType(this.schema, type));\n        if (this.types.length > 1) {\n            const select = document.createElement(\"select\");\n            select.classList.add(\"json-tool-type\");\n            for (const t of this.types) {\n                const option = document.createElement(\"option\");\n                option.innerText = t;\n                option.value = t;\n                select.append(option);\n            }\n            select.value = this.currentType;\n            select.onchange = () => {\n                this.changeType(select.value);\n            };\n            this.element.append(select);\n        }\n        if (type === \"object\") {\n            this.element.append(this.createLineNumber(true));\n            this.element.style.display = \"block\";\n            this.element.classList.add(\"json-tool-object\");\n            this.element.append(\"{\");\n            const object = this.createBlock();\n            this.element.append(object);\n            this.element.append(\"}\");\n            this.element.append(this.createLineNumber());\n            for (const key in val !== null && val !== void 0 ? val : {}) {\n                const obj = this.createObjectKeyValuePair(key, ((_b = this.schema) === null || _b === void 0 ? void 0 : _b.properties) ? this.schema.properties[key] : null, val[key]);\n                object.append(obj);\n                const buttons = document.createElement(\"div\");\n                obj.prepend(buttons);\n                buttons.classList.add(\"json-tool-btns\");\n                if (((_c = this.schema) === null || _c === void 0 ? void 0 : _c.properties) && !this.schema.properties.hasOwnProperty(key)) {\n                    const remove = document.createElement(\"div\");\n                    remove.classList.add(\"json-tool-btn\");\n                    remove.innerText = \"X\";\n                    remove.onclick = () => {\n                        const val = this.getValue();\n                        delete val[key];\n                        this.setCurrentTypeValue(val);\n                        this.updateElement();\n                    };\n                    buttons.append(remove);\n                }\n                else if (!((_e = (_d = this.schema) === null || _d === void 0 ? void 0 : _d.required) === null || _e === void 0 ? void 0 : _e.includes(key))) {\n                    const remove = document.createElement(\"div\");\n                    remove.classList.add(\"json-tool-btn\");\n                    remove.innerText = \"∽\";\n                    remove.onclick = () => {\n                        const val = this.getValue();\n                        delete val[key];\n                        this.setCurrentTypeValue(val);\n                        this.updateElement();\n                    };\n                    buttons.append(remove);\n                }\n            }\n            if ((_f = this.schema) === null || _f === void 0 ? void 0 : _f.properties) {\n                for (const key in this.schema.properties) {\n                    if (val === null || val === void 0 ? void 0 : val.hasOwnProperty(key))\n                        continue;\n                    if ((_h = (_g = this.schema) === null || _g === void 0 ? void 0 : _g.required) === null || _h === void 0 ? void 0 : _h.includes(key)) {\n                        const obj = this.createObjectKeyValuePair(key, this.schema.properties[key]);\n                        object.append(obj);\n                    }\n                    else {\n                        const obj = this.createObjectKeyValuePair(key, this.schema.properties[key], undefined, true);\n                        object.append(obj);\n                        obj.style.textDecoration = \"line-through 2px\";\n                        const buttons = document.createElement(\"div\");\n                        obj.prepend(buttons);\n                        buttons.classList.add(\"json-tool-btns\");\n                        const add = document.createElement(\"div\");\n                        add.classList.add(\"json-tool-btn\");\n                        add.innerText = \"≁\";\n                        add.onclick = () => {\n                            var _a;\n                            if ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.properties) {\n                                const val = this.getValue();\n                                val[key] = JsonElement.getDefaultValue(this.schema.properties[key]).value;\n                                this.setCurrentTypeValue(val);\n                                this.updateElement();\n                            }\n                        };\n                        buttons.append(add);\n                    }\n                }\n            }\n        }\n        else if (type === \"array\") {\n            this.element.append(this.createLineNumber(true));\n            this.element.style.display = \"block\";\n            this.element.classList.add(\"json-tool-object\");\n            this.element.append(\"[\");\n            const array = this.createBlock();\n            this.element.append(array);\n            const add = document.createElement(\"div\");\n            add.classList.add(\"json-tool-btn\");\n            add.innerText = \"+\";\n            this.element.append(add);\n            add.onclick = () => {\n                var _a, _b;\n                const val = [...this.getValue()];\n                if (val.length === ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.maxItems))\n                    return;\n                if ((_b = this.schema) === null || _b === void 0 ? void 0 : _b.items) {\n                    const defaultValue = JsonElement.getDefaultValue(this.schema.items).value;\n                    val.push(defaultValue);\n                    this.currentType = type;\n                    this.setCurrentTypeValue(val);\n                    this.updateElement();\n                }\n            };\n            this.element.append(\"]\");\n            this.element.append(this.createLineNumber());\n            const arr = val !== null && val !== void 0 ? val : [];\n            for (let i = 0; i < arr.length; i++) {\n                const idx = i;\n                const obj = this.createObjectKeyValuePair(i, ((_j = this.schema) === null || _j === void 0 ? void 0 : _j.items) ? this.schema.items : null, val[i]);\n                array.append(obj);\n                const buttons = document.createElement(\"div\");\n                obj.prepend(buttons);\n                buttons.classList.add(\"json-tool-btns\");\n                const remove = document.createElement(\"div\");\n                remove.classList.add(\"json-tool-btn\");\n                remove.innerText = \"X\";\n                remove.onclick = () => {\n                    var _a;\n                    const arr = [...this.getValue()];\n                    if (arr.length === ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.minItems))\n                        return;\n                    arr.splice(idx, 1);\n                    this.setCurrentTypeValue(arr);\n                    this.updateElement();\n                };\n                buttons.append(remove);\n                const up = document.createElement(\"div\");\n                up.classList.add(\"json-tool-btn\");\n                up.innerText = \"ᐃ\";\n                up.onclick = () => {\n                    let arr = [...this.getValue()];\n                    const element = arr.splice(idx, 1);\n                    arr = arr.slice(0, idx - 1).concat(element).concat(arr.slice(idx - 1));\n                    this.setCurrentTypeValue(arr);\n                    this.updateElement();\n                };\n                buttons.append(up);\n                const down = document.createElement(\"div\");\n                down.classList.add(\"json-tool-btn\");\n                down.innerText = \"ᐁ\";\n                down.onclick = () => {\n                    let arr = [...this.getValue()];\n                    const element = arr.splice(idx, 1);\n                    arr = arr.slice(0, idx + 1).concat(element).concat(arr.slice(idx + 1));\n                    this.setCurrentTypeValue(arr);\n                    this.updateElement();\n                };\n                buttons.append(down);\n            }\n        }\n        else if (type === \"boolean\") {\n            const checkbox = document.createElement(\"input\");\n            checkbox.type = \"checkbox\";\n            checkbox.checked = val;\n            checkbox.onchange = () => {\n                this.setCurrentTypeValue(checkbox.checked);\n            };\n            this.element.append(checkbox);\n        }\n        else if (type === \"string\") {\n            if ((_k = this.schema) === null || _k === void 0 ? void 0 : _k.enum) {\n                const select = document.createElement(\"select\");\n                for (const value of [...new Set(this.schema.enum.concat(val))]) {\n                    const option = document.createElement(\"option\");\n                    option.innerText = value;\n                    option.value = value;\n                    select.append(option);\n                }\n                select.value = val;\n                select.onchange = () => {\n                    this.setCurrentTypeValue(select.value);\n                };\n                this.element.append(select);\n            }\n            else if (((_l = this.schema) === null || _l === void 0 ? void 0 : _l.format) === \"textarea\") {\n                const input = document.createElement(\"textarea\");\n                input.value = val;\n                input.minLength = (_o = (_m = this.schema) === null || _m === void 0 ? void 0 : _m.minLength) !== null && _o !== void 0 ? _o : 0;\n                input.maxLength = (_q = (_p = this.schema) === null || _p === void 0 ? void 0 : _p.maxLength) !== null && _q !== void 0 ? _q : 99999999999999;\n                input.onchange = () => {\n                    this.setCurrentTypeValue(input.value);\n                };\n                this.element.append(input);\n            }\n            else if (((_r = this.schema) === null || _r === void 0 ? void 0 : _r.format) === \"date\") {\n                const input = document.createElement(\"input\");\n                input.type = \"date\";\n                input.onchange = () => {\n                    var _a, _b;\n                    this.setCurrentTypeValue((_b = (_a = input.valueAsDate) === null || _a === void 0 ? void 0 : _a.toDateString()) !== null && _b !== void 0 ? _b : \"\");\n                };\n                this.element.append(input);\n                input.valueAsDate = new Date(val);\n            }\n            else {\n                const input = document.createElement(\"input\");\n                input.type = \"text\";\n                if (((_s = this.schema) === null || _s === void 0 ? void 0 : _s.format) && [\"password\", \"email\", \"color\", \"url\"].includes(this.schema.format))\n                    input.type = this.schema.format;\n                input.value = val;\n                input.minLength = (_u = (_t = this.schema) === null || _t === void 0 ? void 0 : _t.minLength) !== null && _u !== void 0 ? _u : 0;\n                input.maxLength = (_w = (_v = this.schema) === null || _v === void 0 ? void 0 : _v.maxLength) !== null && _w !== void 0 ? _w : 99999999999999;\n                input.onchange = () => {\n                    this.setCurrentTypeValue(input.value);\n                };\n                this.element.append(input);\n            }\n        }\n        else if (type === \"null\") {\n            this.element.append(\"null\");\n        }\n        else if (type === \"number\") {\n            const input = document.createElement(\"input\");\n            input.type = \"number\";\n            input.value = val.toString();\n            input.min = (_z = (_y = (_x = this.schema) === null || _x === void 0 ? void 0 : _x.minimum) === null || _y === void 0 ? void 0 : _y.toString()) !== null && _z !== void 0 ? _z : \"\";\n            input.max = (_2 = (_1 = (_0 = this.schema) === null || _0 === void 0 ? void 0 : _0.maximum) === null || _1 === void 0 ? void 0 : _1.toString()) !== null && _2 !== void 0 ? _2 : \"\";\n            if (JsonElement.isInteger(this.schema))\n                input.step = \"1\";\n            input.onchange = () => {\n                this.setCurrentTypeValue(parseFloat(input.value));\n            };\n            this.element.append(input);\n        }\n        else {\n            this.element.append(`[${type}] : ${val}`);\n        }\n        if (this.onUpdate)\n            this.onUpdate();\n    }\n    createLineNumber(overrideMargin = false) {\n        const lineNumber = document.createElement(\"div\");\n        lineNumber.classList.add(\"line-number\");\n        if (overrideMargin)\n            lineNumber.style.marginTop = \"0\";\n        return lineNumber;\n    }\n    createBlock() {\n        const block = document.createElement(\"div\");\n        block.classList.add(\"json-tool-block\");\n        block.style.paddingLeft = \"25px\";\n        block.style.borderLeft = \"1px dashed black\";\n        block.style.marginLeft = \"3px\";\n        let opened = false;\n        const collapse = document.createElement(\"div\");\n        block.append(collapse);\n        collapse.classList.add(\"json-tool-btn\");\n        const toggle = () => {\n            opened = !opened;\n            collapse.innerText = opened ? \"ᐯ\" : \"ᐳ\";\n            block.classList.remove(\"opened\", \"closed\");\n            block.classList.add(opened ? \"opened\" : \"closed\");\n        };\n        collapse.onclick = toggle;\n        toggle();\n        return block;\n    }\n    createObjectKeyValuePair(key, schema, value, noValue = false) {\n        var _a;\n        const parent = document.createElement(\"div\");\n        const originalKey = key;\n        if (typeof key === \"number\") {\n            key = (schema === null || schema === void 0 ? void 0 : schema.title) ? `${schema.title} ${key}` : key;\n        }\n        else {\n            key = (_a = schema === null || schema === void 0 ? void 0 : schema.title) !== null && _a !== void 0 ? _a : key;\n        }\n        const title = document.createElement(\"span\");\n        title.innerText = key.toString();\n        JsonElement.addDescription(title, schema === null || schema === void 0 ? void 0 : schema.description, schema === null || schema === void 0 ? void 0 : schema.examples);\n        parent.append(title);\n        parent.classList.add(\"json-tool-key\");\n        parent.append(\": \");\n        if (!noValue) {\n            const valueElement = document.createElement(\"div\");\n            const element = new JsonElement(valueElement, schema, value, () => this.onUpdate && this.onUpdate(), () => this.validate && this.validate());\n            if (this.currentType === \"array\")\n                this.arrayElements.push(element);\n            else if (this.currentType === \"object\")\n                this.objectElements[originalKey] = element;\n            parent.append(valueElement);\n        }\n        return parent;\n    }\n    changeType(type) {\n        var _a;\n        this.currentType = type;\n        if (!this.currentValues.hasOwnProperty(type)) {\n            if (typeof ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.default) !== \"undefined\" && JsonElement.getType(this.schema.default) === type)\n                this.setCurrentTypeValue(this.schema.default);\n            else\n                this.setCurrentTypeValue(JsonElement.getDefaultValueForType(this.schema, type));\n        }\n        this.updateElement();\n    }\n    setStyle() {\n        this.element.style.whiteSpace = \"pre\";\n        this.element.classList.add(\"json-tool-value\");\n    }\n    getValue() {\n        var _a;\n        let val;\n        if (this.currentType === \"array\") {\n            val = this.arrayElements.map(e => e.getValue());\n        }\n        else if (this.currentType === \"object\") {\n            const obj = {};\n            for (const key in this.objectElements) {\n                obj[key] = this.objectElements[key].getValue();\n            }\n            val = obj;\n        }\n        else {\n            val = (_a = this.currentValues[this.currentType]) !== null && _a !== void 0 ? _a : JsonElement.getDefaultValueForType(this.schema, this.currentType);\n        }\n        this.currentValues[this.currentType] = val;\n        return val;\n    }\n}\n//# sourceMappingURL=JsonTool.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst JsonTool_1 = require(\"./JsonTool\");\nwindow.JsonTool = JsonTool_1.JsonTool;\n//# sourceMappingURL=index.js.map"],"names":["Object","defineProperty","exports","value","JsonTool","constructor","element","validator","_a","_b","this","containerElement","valid","schema","root","document","createElement","style","fontFamily","marginLeft","classList","add","rootObject","rootElement","errorMessages","iframe","width","height","overflow","border","innerHTML","appendChild","iframeBody","contentDocument","contentWindow","querySelector","append","createCss","onload","load","title","textContent","JsonElement","addDescription","description","examples","onUpdate","validate","hide","setValidator","getValue","number","querySelectorAll","forEach","e","innerText","toString","window","setTimeout","errors","map","message","join","parent","arrayElements","objectElements","setStyle","currentValues","types","getDefaultAvailableTypes","actualType","getType","currentType","push","setCurrentTypeValue","def","getDefaultValue","type","Set","updateElement","JSON","parse","stringify","undefined","static","textDecoration","cursor","Array","isArray","arr","includes","t","availableTypes","default","length","getDefaultValueForType","_c","isInteger","Math","ceil","minimum","enum","format","Date","toDateString","obj","properties","required","hasOwnProperty","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","_1","_2","display","remove","createLineNumber","val","select","option","onchange","changeType","object","createBlock","key","createObjectKeyValuePair","buttons","prepend","onclick","array","maxItems","items","defaultValue","i","idx","minItems","splice","up","slice","concat","down","checkbox","checked","input","minLength","maxLength","valueAsDate","min","max","maximum","step","parseFloat","overrideMargin","lineNumber","marginTop","block","paddingLeft","borderLeft","opened","collapse","toggle","noValue","originalKey","valueElement","whiteSpace","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","JsonTool_1"],"sourceRoot":""}