{"version":3,"file":"www/js/json-tool.js","mappings":"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","sources":["webpack://@wanieru/json-tool/./js/JsonTool.js","webpack://@wanieru/json-tool/webpack/bootstrap","webpack://@wanieru/json-tool/./js/index.js"],"sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.JsonTool = void 0;\r\nclass JsonTool {\r\n    constructor(element, validator = null) {\r\n        var _a, _b;\r\n        this.elementState = {};\r\n        this.undoStack = [];\r\n        this.redoStack = [];\r\n        this.undoing = false;\r\n        this.containerElement = element;\r\n        this.validator = validator !== null && validator !== void 0 ? validator : (() => { return { valid: true }; });\r\n        this.schema = null;\r\n        this.root = document.createElement(\"div\");\r\n        this.root.style.fontFamily = \"monospace\";\r\n        this.root.style.marginLeft = \"30px\";\r\n        this.root.classList.add(\"json-tool\");\r\n        this.rootObject = null;\r\n        this.rootElement = null;\r\n        this.errorMessages = document.createElement(\"div\");\r\n        this.errorMessages.classList.add(\"json-tool-errors\");\r\n        const undoRedoButtons = document.createElement(\"div\");\r\n        this.undoButton = document.createElement(\"button\");\r\n        this.undoButton.innerText = \"⤶ Undo\";\r\n        this.undoButton.onclick = () => this.undo();\r\n        undoRedoButtons.appendChild(this.undoButton);\r\n        this.redoButton = document.createElement(\"button\");\r\n        this.redoButton.innerText = \"⤷ Redo\";\r\n        this.redoButton.style.marginLeft = \"5px\";\r\n        this.redoButton.onclick = () => this.redo();\r\n        undoRedoButtons.appendChild(this.redoButton);\r\n        const iframe = document.createElement(\"iframe\");\r\n        iframe.style.width = \"100%\";\r\n        iframe.style.height = \"100%\";\r\n        iframe.style.overflow = \"scroll\";\r\n        iframe.style.border = \"0\";\r\n        element.innerHTML = \"\";\r\n        element.appendChild(iframe);\r\n        this.iframeBody = (_b = (iframe.contentDocument || ((_a = iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.document))) === null || _b === void 0 ? void 0 : _b.querySelector(\"body\");\r\n        this.iframeBody.append(this.root);\r\n        this.createCss(this.iframeBody);\r\n        iframe.onload = () => {\r\n            var _a, _b;\r\n            this.iframeBody = (_b = (iframe.contentDocument || ((_a = iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.document))) === null || _b === void 0 ? void 0 : _b.querySelector(\"body\");\r\n            this.iframeBody.append(undoRedoButtons);\r\n            this.iframeBody.append(this.root);\r\n            this.createCss(this.iframeBody);\r\n            this.iframeBody.appendChild(this.errorMessages);\r\n        };\r\n    }\r\n    deleteChild(key) {\r\n    }\r\n    getState() {\r\n        return this.elementState;\r\n    }\r\n    load(schema, value, validator) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.validator = validator !== null && validator !== void 0 ? validator : this.validator;\r\n            this.schema = schema;\r\n            this.root.innerHTML = \"\";\r\n            if (schema.title) {\r\n                const title = document.createElement(\"h3\");\r\n                title.textContent = schema.title;\r\n                JsonElement.addDescription(title, schema.description, schema === null || schema === void 0 ? void 0 : schema.examples);\r\n                this.root.appendChild(title);\r\n            }\r\n            this.rootObject = document.createElement(\"div\");\r\n            this.root.appendChild(this.rootObject);\r\n            this.rootElement = new JsonElement(\"\", \"root\", this.rootObject, this.schema, value, this);\r\n            yield this.validate();\r\n        });\r\n    }\r\n    hide() {\r\n        this.containerElement.innerHTML = \"\";\r\n    }\r\n    setValidator(validator) {\r\n        this.validator = validator;\r\n    }\r\n    getValue() {\r\n        var _a;\r\n        return (_a = this.rootElement) === null || _a === void 0 ? void 0 : _a.getValue();\r\n    }\r\n    update() {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.rootObject)\r\n                return;\r\n            let number = 1;\r\n            (_a = this.rootObject) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".line-number\").forEach(e => {\r\n                e.innerText = number.toString();\r\n                number++;\r\n            });\r\n            yield this.validate();\r\n        });\r\n    }\r\n    validate() {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield new Promise(resolve => window.setTimeout(resolve, 1));\r\n            if (!this.schema || !this.errorMessages)\r\n                return;\r\n            const valid = this.validator(this.getValue(), this.schema);\r\n            this.errorMessages.innerHTML = \"\";\r\n            if (!valid.valid) {\r\n                this.errorMessages.innerHTML = ((_a = valid.errors) !== null && _a !== void 0 ? _a : []).map(e => typeof e === \"string\" ? e : e.message).join(\"\\n\");\r\n            }\r\n            yield this.pushUndoState();\r\n        });\r\n    }\r\n    pushUndoState() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.undoing)\r\n                return;\r\n            this.undoing = true;\r\n            yield new Promise(resolve => window.setTimeout(resolve, 1));\r\n            const value = this.getValue();\r\n            if (this.undoStack.length > 0 && JSON.stringify(value) === JSON.stringify(this.undoStack[0])) {\r\n                this.undoing = false;\r\n                return;\r\n            }\r\n            this.undoStack.unshift(value);\r\n            this.redoStack = [];\r\n            console.log(this.undoStack, this.redoStack);\r\n            this.undoing = false;\r\n            this.updateUndoRedoButtons();\r\n        });\r\n    }\r\n    undo() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.undoStack.length < 2 || this.undoing || !this.schema)\r\n                return;\r\n            this.undoing = true;\r\n            this.redoStack.unshift(this.getValue());\r\n            this.undoStack.splice(0, 1);\r\n            const value = this.undoStack[0];\r\n            yield this.load(this.schema, value, this.validator);\r\n            this.undoing = false;\r\n            this.updateUndoRedoButtons();\r\n        });\r\n    }\r\n    redo() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.redoStack.length < 1 || this.undoing || !this.schema)\r\n                return;\r\n            this.undoing = true;\r\n            const value = this.redoStack.splice(0, 1)[0];\r\n            this.undoStack.unshift(value);\r\n            yield this.load(this.schema, value, this.validator);\r\n            this.undoing = false;\r\n            this.updateUndoRedoButtons();\r\n        });\r\n    }\r\n    updateUndoRedoButtons() {\r\n        this.undoButton.disabled = this.undoStack.length < 2;\r\n        this.redoButton.disabled = this.redoStack.length < 1;\r\n    }\r\n    createCss(parent) {\r\n        const style = document.createElement(\"style\");\r\n        parent.appendChild(style);\r\n        style.innerHTML =\r\n            `\r\n            .json-tool-btn\r\n             {\r\n                border: 1px black solid;\r\n                cursor: pointer;\r\n                display: block;\r\n             }\r\n              .json-tool-block > .json-tool-btn {\r\n                margin-top: -17px;\r\n                margin-left: -40px;\r\n                position: absolute;\r\n                opacity: 0;\r\n              }\r\n              .json-tool-block:hover > .json-tool-btn\r\n              {\r\n                opacity: 1;\r\n              }\r\n              .json-tool-value > .json-tool-btn {\r\n                margin-left: 10px;\r\n                display: inline-block;\r\n                position: absolute;\r\n                opacity :0;\r\n              }\r\n              .json-tool-value:hover > .json-tool-btn\r\n              {\r\n                opacity :1;\r\n              }\r\n              .json-tool-key > .json-tool-btns {\r\n                margin-left: -36px;\r\n                display: inline-block;\r\n                position: absolute;\r\n                width: 32px;\r\n                text-align: right;\r\n                opacity: 0;\r\n              }\r\n              .json-tool-key:hover > .json-tool-btns\r\n              {\r\n                opacity: 1;\r\n              }\r\n\r\n              .json-tool-key > .json-tool-btns > .json-tool-btn {\r\n                display: inline-block;\r\n                margin-right: 2px;\r\n              }\r\n              .json-tool-types > .json-tool-type\r\n              {\r\n                padding:0;\r\n                margin:0;\r\n                border:0;\r\n              }\r\n              .json-tool-value > .json-tool-types\r\n              {\r\n                float:right;\r\n                opacity: 0;\r\n              }\r\n              .json-tool-value.json-tool-object > .json-tool-types\r\n              {\r\n                float:none;\r\n                position: absolute;\r\n                margin-left: 15px;\r\n              }\r\n              .json-tool-value:hover > .json-tool-types\r\n              {\r\n                opacity: 1;\r\n              }\r\n\r\n              .json-tool-block.opened > .json-tool-key {display: block}\r\n              .json-tool-block.closed > .json-tool-key {display: none}\r\n\r\n              .line-number\r\n              {\r\n                position: absolute;\r\n                left: 0;\r\n                text-align: right;\r\n                width: 20px;\r\n              }\r\n              .json-tool-value.json-tool-object > .line-number\r\n              {\r\n                margin-top: -15px;\r\n              }\r\n              .json-tool input, .json-tool select, .json-tool textarea\r\n              {\r\n                border: 0;\r\n                background-color: #ece9e9;\r\n                padding: 0;\r\n                margin: 1px;\r\n              }\r\n\r\n                .json-tool-errors {\r\n                    color: red;\r\n                    white-space: pre;\r\n                    font-family: monospace;\r\n                    line-height: 2em;\r\n                    font-weight: bold;\r\n                    font-size: 1.2em;\r\n                }\r\n`;\r\n    }\r\n}\r\nexports.JsonTool = JsonTool;\r\nclass JsonElement {\r\n    constructor(key, path, element, schema, value, parent) {\r\n        this.arrayElements = [];\r\n        this.objectElements = {};\r\n        this.element = element;\r\n        this.setStyle();\r\n        this.schema = schema;\r\n        this.parent = parent;\r\n        this.key = key;\r\n        this.path = path;\r\n        this.currentValues = {};\r\n        this.types = schema ? JsonElement.getDefaultAvailableTypes(schema) : [];\r\n        const actualType = JsonElement.getType(value);\r\n        this.currentType = \"\";\r\n        if (actualType !== \"undefined\") {\r\n            this.currentType = actualType;\r\n            this.types.push(actualType);\r\n            this.setCurrentTypeValue(value);\r\n        }\r\n        else if (this.schema) {\r\n            const def = JsonElement.getDefaultValue(this.schema);\r\n            this.currentType = def.type;\r\n            this.setCurrentTypeValue(def.value);\r\n        }\r\n        this.types = [...new Set(this.types)];\r\n        this.updateElement();\r\n    }\r\n    update() {\r\n        this.parent.update();\r\n    }\r\n    validate() {\r\n        this.parent.validate();\r\n    }\r\n    getPath(element) {\r\n        for (let i = 0; i < this.arrayElements.length; i++) {\r\n            if (this.arrayElements[i] === element)\r\n                return `${this.path}.${i}`;\r\n        }\r\n        for (const key in this.objectElements) {\r\n            if (this.objectElements[key] === element)\r\n                return `${this.path}.${key}`;\r\n        }\r\n        return `${this.path}.?`;\r\n    }\r\n    getState() {\r\n        return this.parent.getState();\r\n    }\r\n    deleteChild(key) {\r\n        if (typeof key === \"string\") {\r\n            const val = this.getValue();\r\n            delete val[key];\r\n            this.setCurrentTypeValue(val);\r\n            this.updateElement();\r\n        }\r\n        else if (typeof key === \"number\") {\r\n            const arr = [...this.getValue()];\r\n            arr.splice(key, 1);\r\n            this.setCurrentTypeValue(arr);\r\n            this.updateElement();\r\n        }\r\n    }\r\n    setCurrentTypeValue(value) {\r\n        this.currentValues[this.currentType] = typeof value !== \"undefined\" ? JSON.parse(JSON.stringify(value)) : undefined;\r\n        if (this.validate)\r\n            this.validate();\r\n    }\r\n    static addDescription(element, description, examples) {\r\n        if (examples) {\r\n            description = `${description ? `${description}\\n` : \"\"}Examples:\\n${examples.map(e => JSON.stringify(e)).join(\",\\n\")}`;\r\n        }\r\n        if (description) {\r\n            element.title = description;\r\n            element.style.textDecoration = \"underline dotted\";\r\n            element.style.cursor = \"help\";\r\n        }\r\n    }\r\n    static getType(value) {\r\n        if (typeof value === \"undefined\")\r\n            return \"undefined\";\r\n        if (Array.isArray(value)) {\r\n            return \"array\";\r\n        }\r\n        else if (value === null) {\r\n            return \"null\";\r\n        }\r\n        else {\r\n            return typeof value;\r\n        }\r\n    }\r\n    static isInteger(schema) {\r\n        if (!schema)\r\n            return false;\r\n        const arr = Array.isArray(schema.type) ? schema.type : [schema.type];\r\n        return arr.includes(\"integer\") && !arr.includes(\"number\");\r\n    }\r\n    static getDefaultAvailableTypes(schema) {\r\n        let types = Array.isArray(schema.type) ? [...schema.type] : [schema.type];\r\n        types = types.map(t => {\r\n            if (t === \"integer\")\r\n                return \"number\";\r\n            return t;\r\n        });\r\n        return types;\r\n    }\r\n    static getDefaultValue(schema) {\r\n        const availableTypes = this.getDefaultAvailableTypes(schema);\r\n        if (typeof schema.default !== \"undefined\") {\r\n            return { type: this.getType(schema.default), value: schema.default };\r\n        }\r\n        else if (schema.examples && schema.examples.length > 0) {\r\n            return { type: this.getType(schema.examples[0]), value: schema.examples[0] };\r\n        }\r\n        else {\r\n            return { type: availableTypes[0], value: this.getDefaultValueForType(schema, availableTypes[0]) };\r\n        }\r\n    }\r\n    static getDefaultValueForType(schema, type) {\r\n        var _a, _b, _c;\r\n        if (type === \"null\") {\r\n            return null;\r\n        }\r\n        else if (type === \"number\") {\r\n            return this.isInteger(schema) ? Math.ceil((_a = schema === null || schema === void 0 ? void 0 : schema.minimum) !== null && _a !== void 0 ? _a : 0) : (_b = schema === null || schema === void 0 ? void 0 : schema.minimum) !== null && _b !== void 0 ? _b : 0;\r\n        }\r\n        else if (type === \"string\") {\r\n            if (schema === null || schema === void 0 ? void 0 : schema.enum)\r\n                return schema.enum[0];\r\n            if ((schema === null || schema === void 0 ? void 0 : schema.format) === \"color\")\r\n                return \"#000000\";\r\n            if ((schema === null || schema === void 0 ? void 0 : schema.format) === \"date\")\r\n                return new Date().toDateString();\r\n            return \"\";\r\n        }\r\n        else if (type === \"boolean\") {\r\n            return false;\r\n        }\r\n        else if (type === \"array\") {\r\n            return [];\r\n        }\r\n        else if (type === \"object\") {\r\n            const obj = {};\r\n            if (schema === null || schema === void 0 ? void 0 : schema.properties) {\r\n                for (const required of (_c = schema.required) !== null && _c !== void 0 ? _c : []) {\r\n                    if (!schema.properties.hasOwnProperty(required))\r\n                        continue;\r\n                    const def = this.getDefaultValue(schema.properties[required]);\r\n                    obj[required] = def.value;\r\n                }\r\n            }\r\n            return obj;\r\n        }\r\n    }\r\n    updateElement() {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\r\n        this.objectElements = {};\r\n        this.arrayElements = [];\r\n        this.element.innerHTML = \"\";\r\n        this.element.style.display = \"inline-block\";\r\n        this.element.classList.remove(\"json-tool-object\");\r\n        this.element.append(this.createLineNumber());\r\n        const type = this.currentType;\r\n        const val = (_a = this.currentValues[type]) !== null && _a !== void 0 ? _a : (this.currentValues[type] = JsonElement.getDefaultValueForType(this.schema, type));\r\n        const typeDiv = document.createElement(\"div\");\r\n        typeDiv.classList.add(\"json-tool-types\");\r\n        this.element.append(typeDiv);\r\n        if (this.types.length > 1 || type !== this.types[0]) {\r\n            const select = document.createElement(\"select\");\r\n            select.classList.add(\"json-tool-type\");\r\n            for (const t of this.types) {\r\n                const option = document.createElement(\"option\");\r\n                option.innerText = t;\r\n                option.value = t;\r\n                select.append(option);\r\n            }\r\n            select.value = this.currentType;\r\n            select.onchange = () => {\r\n                this.changeType(select.value);\r\n            };\r\n            typeDiv.append(select);\r\n        }\r\n        const changeTypeButton = document.createElement(\"div\");\r\n        changeTypeButton.classList.add(\"json-tool-btn\");\r\n        changeTypeButton.style.display = \"inline-block\";\r\n        changeTypeButton.style.marginLeft = \"5px\";\r\n        changeTypeButton.innerText = \"*\";\r\n        changeTypeButton.onclick = () => {\r\n            var _a;\r\n            const validTypes = [\"object\", \"array\", \"boolean\", \"string\", \"number\", \"null\", \"undefined\"];\r\n            const newType = (_a = window.prompt(`Enter new type:\\n${validTypes.join(\", \")}`)) !== null && _a !== void 0 ? _a : \"\";\r\n            if (validTypes.includes(newType)) {\r\n                if (newType === \"undefined\") {\r\n                    this.parent.deleteChild(this.key);\r\n                }\r\n                else {\r\n                    this.changeType(newType);\r\n                }\r\n            }\r\n        };\r\n        typeDiv.append(changeTypeButton);\r\n        if (type === \"object\") {\r\n            this.element.append(this.createLineNumber(true));\r\n            this.element.style.display = \"block\";\r\n            this.element.classList.add(\"json-tool-object\");\r\n            this.element.append(\"{\");\r\n            const object = this.createBlock();\r\n            this.element.append(object);\r\n            const add = document.createElement(\"div\");\r\n            add.classList.add(\"json-tool-btn\");\r\n            add.innerText = \"+\";\r\n            this.element.append(add);\r\n            add.onclick = () => {\r\n                const key = prompt(\"Add new key?\");\r\n                if (!!key) {\r\n                    const val = this.getValue();\r\n                    val[key] = null;\r\n                    this.setCurrentTypeValue(val);\r\n                    this.updateElement();\r\n                }\r\n            };\r\n            this.element.append(\"}\");\r\n            this.element.append(this.createLineNumber());\r\n            for (const key in val !== null && val !== void 0 ? val : {}) {\r\n                const obj = this.createObjectKeyValuePair(key, ((_b = this.schema) === null || _b === void 0 ? void 0 : _b.properties) ? this.schema.properties[key] : null, val[key]);\r\n                object.append(obj);\r\n                const buttons = document.createElement(\"div\");\r\n                obj.prepend(buttons);\r\n                buttons.classList.add(\"json-tool-btns\");\r\n                if (((_c = this.schema) === null || _c === void 0 ? void 0 : _c.properties) && !this.schema.properties.hasOwnProperty(key)) {\r\n                    const remove = document.createElement(\"div\");\r\n                    remove.classList.add(\"json-tool-btn\");\r\n                    remove.innerText = \"X\";\r\n                    remove.onclick = () => {\r\n                        if (!confirm(`Are you sure you want to delete the key ${key}?`))\r\n                            return;\r\n                        this.deleteChild(key);\r\n                    };\r\n                    buttons.append(remove);\r\n                }\r\n                else if (!((_e = (_d = this.schema) === null || _d === void 0 ? void 0 : _d.required) === null || _e === void 0 ? void 0 : _e.includes(key))) {\r\n                    const remove = document.createElement(\"div\");\r\n                    remove.classList.add(\"json-tool-btn\");\r\n                    remove.innerText = \"∽\";\r\n                    remove.onclick = () => {\r\n                        if (!confirm(`Are you sure you want to delete the key ${key}?`))\r\n                            return;\r\n                        this.deleteChild(key);\r\n                    };\r\n                    buttons.append(remove);\r\n                }\r\n            }\r\n            if ((_f = this.schema) === null || _f === void 0 ? void 0 : _f.properties) {\r\n                for (const key in this.schema.properties) {\r\n                    if (val === null || val === void 0 ? void 0 : val.hasOwnProperty(key))\r\n                        continue;\r\n                    const obj = this.createObjectKeyValuePair(key, this.schema.properties[key], undefined, true);\r\n                    object.append(obj);\r\n                    obj.style.textDecoration = \"line-through 2px\";\r\n                    const buttons = document.createElement(\"div\");\r\n                    obj.prepend(buttons);\r\n                    buttons.classList.add(\"json-tool-btns\");\r\n                    const add = document.createElement(\"div\");\r\n                    add.classList.add(\"json-tool-btn\");\r\n                    add.innerText = \"≁\";\r\n                    add.onclick = () => {\r\n                        var _a;\r\n                        if ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.properties) {\r\n                            const val = this.getValue();\r\n                            val[key] = JsonElement.getDefaultValue(this.schema.properties[key]).value;\r\n                            this.setCurrentTypeValue(val);\r\n                            this.updateElement();\r\n                        }\r\n                    };\r\n                    buttons.append(add);\r\n                }\r\n            }\r\n        }\r\n        else if (type === \"array\") {\r\n            this.element.append(this.createLineNumber(true));\r\n            this.element.style.display = \"block\";\r\n            this.element.classList.add(\"json-tool-object\");\r\n            this.element.append(\"[\");\r\n            const array = this.createBlock();\r\n            this.element.append(array);\r\n            const add = document.createElement(\"div\");\r\n            add.classList.add(\"json-tool-btn\");\r\n            add.innerText = \"+\";\r\n            this.element.append(add);\r\n            add.onclick = () => {\r\n                var _a, _b;\r\n                const val = [...this.getValue()];\r\n                if (val.length === ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.maxItems) && !confirm(`This array is at max capacity - really add more?`))\r\n                    return;\r\n                const defaultValue = ((_b = this.schema) === null || _b === void 0 ? void 0 : _b.items) ? JsonElement.getDefaultValue(this.schema.items).value : null;\r\n                val.push(defaultValue);\r\n                this.currentType = type;\r\n                this.setCurrentTypeValue(val);\r\n                this.setIsOpened(true);\r\n                this.updateElement();\r\n            };\r\n            this.element.append(\"]\");\r\n            this.element.append(this.createLineNumber());\r\n            const arr = val !== null && val !== void 0 ? val : [];\r\n            for (let i = 0; i < arr.length; i++) {\r\n                const idx = i;\r\n                const obj = this.createObjectKeyValuePair(i, ((_g = this.schema) === null || _g === void 0 ? void 0 : _g.items) ? this.schema.items : null, val[i]);\r\n                array.append(obj);\r\n                const buttons = document.createElement(\"div\");\r\n                obj.prepend(buttons);\r\n                buttons.classList.add(\"json-tool-btns\");\r\n                const remove = document.createElement(\"div\");\r\n                remove.classList.add(\"json-tool-btn\");\r\n                remove.innerText = \"X\";\r\n                remove.onclick = () => {\r\n                    var _a;\r\n                    const arr = [...this.getValue()];\r\n                    if (arr.length === ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.minItems)) {\r\n                        alert(`${this.path} needs at least ${arr.length} elements.`);\r\n                        return;\r\n                    }\r\n                    if (!confirm(`Are you sure you want to delete element ${idx}?`))\r\n                        return;\r\n                    this.deleteChild(idx);\r\n                };\r\n                buttons.append(remove);\r\n                const up = document.createElement(\"div\");\r\n                up.classList.add(\"json-tool-btn\");\r\n                up.innerText = \"ᐃ\";\r\n                up.onclick = () => {\r\n                    let arr = [...this.getValue()];\r\n                    const element = arr.splice(idx, 1);\r\n                    arr = arr.slice(0, idx - 1).concat(element).concat(arr.slice(idx - 1));\r\n                    this.setCurrentTypeValue(arr);\r\n                    this.updateElement();\r\n                };\r\n                buttons.append(up);\r\n                const down = document.createElement(\"div\");\r\n                down.classList.add(\"json-tool-btn\");\r\n                down.innerText = \"ᐁ\";\r\n                down.onclick = () => {\r\n                    let arr = [...this.getValue()];\r\n                    const element = arr.splice(idx, 1);\r\n                    arr = arr.slice(0, idx + 1).concat(element).concat(arr.slice(idx + 1));\r\n                    this.setCurrentTypeValue(arr);\r\n                    this.updateElement();\r\n                };\r\n                buttons.append(down);\r\n            }\r\n        }\r\n        else if (type === \"boolean\") {\r\n            const checkbox = document.createElement(\"input\");\r\n            checkbox.type = \"checkbox\";\r\n            checkbox.checked = val;\r\n            checkbox.onchange = () => {\r\n                this.setCurrentTypeValue(checkbox.checked);\r\n            };\r\n            this.element.append(checkbox);\r\n        }\r\n        else if (type === \"string\") {\r\n            if ((_h = this.schema) === null || _h === void 0 ? void 0 : _h.enum) {\r\n                const select = document.createElement(\"select\");\r\n                for (const value of [...new Set(this.schema.enum.concat(val))]) {\r\n                    const option = document.createElement(\"option\");\r\n                    option.innerText = value;\r\n                    option.value = value;\r\n                    select.append(option);\r\n                }\r\n                select.value = val;\r\n                select.onchange = () => {\r\n                    this.setCurrentTypeValue(select.value);\r\n                };\r\n                this.element.append(select);\r\n            }\r\n            else if (((_j = this.schema) === null || _j === void 0 ? void 0 : _j.format) === \"textarea\") {\r\n                const input = document.createElement(\"textarea\");\r\n                input.value = val;\r\n                input.minLength = (_l = (_k = this.schema) === null || _k === void 0 ? void 0 : _k.minLength) !== null && _l !== void 0 ? _l : 0;\r\n                input.maxLength = (_o = (_m = this.schema) === null || _m === void 0 ? void 0 : _m.maxLength) !== null && _o !== void 0 ? _o : 99999999999999;\r\n                input.onchange = () => {\r\n                    this.setCurrentTypeValue(input.value);\r\n                };\r\n                this.element.append(input);\r\n            }\r\n            else if (((_p = this.schema) === null || _p === void 0 ? void 0 : _p.format) === \"date\") {\r\n                const input = document.createElement(\"input\");\r\n                input.type = \"date\";\r\n                input.onchange = () => {\r\n                    var _a, _b;\r\n                    this.setCurrentTypeValue((_b = (_a = input.valueAsDate) === null || _a === void 0 ? void 0 : _a.toDateString()) !== null && _b !== void 0 ? _b : \"\");\r\n                };\r\n                this.element.append(input);\r\n                input.valueAsDate = new Date(val);\r\n            }\r\n            else {\r\n                const input = document.createElement(\"input\");\r\n                input.type = \"text\";\r\n                if (((_q = this.schema) === null || _q === void 0 ? void 0 : _q.format) && [\"password\", \"email\", \"color\", \"url\"].includes(this.schema.format))\r\n                    input.type = this.schema.format;\r\n                input.value = val;\r\n                input.minLength = (_s = (_r = this.schema) === null || _r === void 0 ? void 0 : _r.minLength) !== null && _s !== void 0 ? _s : 0;\r\n                input.maxLength = (_u = (_t = this.schema) === null || _t === void 0 ? void 0 : _t.maxLength) !== null && _u !== void 0 ? _u : 99999999999999;\r\n                input.onchange = () => {\r\n                    this.setCurrentTypeValue(input.value);\r\n                };\r\n                this.element.append(input);\r\n            }\r\n        }\r\n        else if (type === \"null\") {\r\n            this.element.append(\"null\");\r\n        }\r\n        else if (type === \"number\") {\r\n            const input = document.createElement(\"input\");\r\n            input.type = \"number\";\r\n            input.value = val.toString();\r\n            input.min = (_x = (_w = (_v = this.schema) === null || _v === void 0 ? void 0 : _v.minimum) === null || _w === void 0 ? void 0 : _w.toString()) !== null && _x !== void 0 ? _x : \"\";\r\n            input.max = (_0 = (_z = (_y = this.schema) === null || _y === void 0 ? void 0 : _y.maximum) === null || _z === void 0 ? void 0 : _z.toString()) !== null && _0 !== void 0 ? _0 : \"\";\r\n            if (JsonElement.isInteger(this.schema))\r\n                input.step = \"1\";\r\n            input.onchange = () => {\r\n                this.setCurrentTypeValue(parseFloat(input.value));\r\n            };\r\n            this.element.append(input);\r\n        }\r\n        else {\r\n            this.element.append(`[${type}] : ${val}`);\r\n        }\r\n        this.update();\r\n    }\r\n    createLineNumber(overrideMargin = false) {\r\n        const lineNumber = document.createElement(\"div\");\r\n        lineNumber.classList.add(\"line-number\");\r\n        if (overrideMargin)\r\n            lineNumber.style.marginTop = \"0\";\r\n        return lineNumber;\r\n    }\r\n    isOpened() {\r\n        var _a;\r\n        return (_a = this.parent.getState()[`${this.path}_opened`]) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    setIsOpened(state) {\r\n        this.parent.getState()[`${this.path}_opened`] = state;\r\n    }\r\n    createBlock() {\r\n        const block = document.createElement(\"div\");\r\n        block.classList.add(\"json-tool-block\");\r\n        block.style.paddingLeft = \"25px\";\r\n        block.style.borderLeft = \"1px dashed black\";\r\n        block.style.marginLeft = \"3px\";\r\n        const collapse = document.createElement(\"div\");\r\n        if (this.path !== \"root\")\r\n            block.append(collapse);\r\n        collapse.classList.add(\"json-tool-btn\");\r\n        const updateOpened = (opened) => {\r\n            collapse.innerText = opened ? \"ᐯ\" : \"ᐳ\";\r\n            block.classList.remove(\"opened\", \"closed\");\r\n            block.classList.add(opened ? \"opened\" : \"closed\");\r\n        };\r\n        const toggle = () => {\r\n            const opened = !this.isOpened();\r\n            this.setIsOpened(opened);\r\n            updateOpened(opened);\r\n        };\r\n        collapse.onclick = toggle;\r\n        updateOpened(this.isOpened());\r\n        return block;\r\n    }\r\n    createObjectKeyValuePair(key, schema, value, noValue = false) {\r\n        var _a;\r\n        const parent = document.createElement(\"div\");\r\n        const originalKey = key;\r\n        if (typeof key === \"number\") {\r\n            key = (schema === null || schema === void 0 ? void 0 : schema.title) ? `${schema.title} ${key}` : key;\r\n        }\r\n        else {\r\n            key = (_a = schema === null || schema === void 0 ? void 0 : schema.title) !== null && _a !== void 0 ? _a : key;\r\n        }\r\n        const title = document.createElement(\"span\");\r\n        title.innerText = key.toString();\r\n        JsonElement.addDescription(title, schema === null || schema === void 0 ? void 0 : schema.description, schema === null || schema === void 0 ? void 0 : schema.examples);\r\n        parent.append(title);\r\n        parent.classList.add(\"json-tool-key\");\r\n        parent.append(\": \");\r\n        if (!noValue) {\r\n            const valueElement = document.createElement(\"div\");\r\n            const element = new JsonElement(originalKey, `${this.path}.${originalKey}`, valueElement, schema, value, this);\r\n            if (this.currentType === \"array\")\r\n                this.arrayElements.push(element);\r\n            else if (this.currentType === \"object\")\r\n                this.objectElements[originalKey] = element;\r\n            parent.append(valueElement);\r\n        }\r\n        return parent;\r\n    }\r\n    changeType(type) {\r\n        var _a;\r\n        this.currentType = type;\r\n        if (!this.currentValues.hasOwnProperty(type)) {\r\n            if (typeof ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.default) !== \"undefined\" && JsonElement.getType(this.schema.default) === type)\r\n                this.setCurrentTypeValue(this.schema.default);\r\n            else\r\n                this.setCurrentTypeValue(JsonElement.getDefaultValueForType(this.schema, type));\r\n        }\r\n        this.updateElement();\r\n    }\r\n    setStyle() {\r\n        this.element.style.whiteSpace = \"pre\";\r\n        this.element.classList.add(\"json-tool-value\");\r\n    }\r\n    getValue() {\r\n        var _a;\r\n        let val;\r\n        if (this.currentType === \"array\") {\r\n            val = this.arrayElements.map(e => e.getValue());\r\n        }\r\n        else if (this.currentType === \"object\") {\r\n            const obj = {};\r\n            for (const key in this.objectElements) {\r\n                obj[key] = this.objectElements[key].getValue();\r\n            }\r\n            val = obj;\r\n        }\r\n        else {\r\n            val = (_a = this.currentValues[this.currentType]) !== null && _a !== void 0 ? _a : JsonElement.getDefaultValueForType(this.schema, this.currentType);\r\n        }\r\n        this.currentValues[this.currentType] = val;\r\n        return val;\r\n    }\r\n}\r\n//# sourceMappingURL=JsonTool.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst JsonTool_1 = require(\"./JsonTool\");\r\nwindow.JsonTool = JsonTool_1.JsonTool;\r\n//# sourceMappingURL=index.js.map"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","JsonTool","constructor","element","validator","_a","_b","elementState","undoStack","redoStack","undoing","containerElement","valid","schema","root","document","createElement","style","fontFamily","marginLeft","classList","add","rootObject","rootElement","errorMessages","undoRedoButtons","undoButton","innerText","onclick","undo","appendChild","redoButton","redo","iframe","width","height","overflow","border","innerHTML","iframeBody","contentDocument","contentWindow","querySelector","append","createCss","onload","deleteChild","key","getState","load","title","textContent","JsonElement","addDescription","description","examples","validate","hide","setValidator","getValue","update","number","querySelectorAll","forEach","toString","window","setTimeout","errors","map","message","join","pushUndoState","length","JSON","stringify","unshift","console","log","updateUndoRedoButtons","splice","disabled","parent","path","arrayElements","objectElements","setStyle","currentValues","types","getDefaultAvailableTypes","actualType","getType","currentType","push","setCurrentTypeValue","def","getDefaultValue","type","Set","updateElement","getPath","i","val","arr","parse","undefined","static","textDecoration","cursor","Array","isArray","includes","t","availableTypes","default","getDefaultValueForType","_c","isInteger","Math","ceil","minimum","enum","format","Date","toDateString","obj","properties","required","hasOwnProperty","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","display","remove","createLineNumber","typeDiv","select","option","onchange","changeType","changeTypeButton","validTypes","newType","prompt","object","createBlock","createObjectKeyValuePair","buttons","prepend","confirm","array","maxItems","defaultValue","items","setIsOpened","idx","minItems","alert","up","slice","concat","down","checkbox","checked","input","minLength","maxLength","valueAsDate","min","max","maximum","parseFloat","overrideMargin","lineNumber","marginTop","isOpened","state","block","paddingLeft","borderLeft","collapse","updateOpened","opened","noValue","originalKey","valueElement","whiteSpace","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","call","JsonTool_1"],"sourceRoot":""}