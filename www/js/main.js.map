{"version":3,"file":"main.js","mappings":";;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,gBAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wDAAwD;AACxD,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA,kCAAkC;AAClC;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,cAAc,EAAE,IAAI;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;;;;;;;;;;;ACzcN;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,kBAAkB,GAAG,iBAAiB,GAAG,mBAAmB,GAAG,kBAAkB,GAAG,kBAAkB,GAAG,gBAAgB;AAC7I;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,uBAAuB,YAAY,GAAG,YAAY;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,8DAA8D;AAC9D,uDAAuD;AACvD;AACA;AACA;AACA;AACA,gEAAgE,gEAAgE,kEAAkE;AAClM;AACA,qEAAqE,QAAQ,qFAAqF;AAClK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;ACzSa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY;AACZ,0BAA0B,mBAAO,CAAC,gDAAQ;AAC1C,YAAY;AACZ;;;;;;;;;;AC5Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,GAAG,cAAc,GAAG,eAAe,GAAG,cAAc,GAAG,cAAc;AAClF,mBAAmB,mBAAO,CAAC,wDAAY;AACvC,oBAAoB;AACpB,cAAc;AACd,oBAAoB;AACpB,cAAc;AACd,qBAAqB;AACrB,eAAe;AACf;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,aAAa;AACb;;;;;;UClBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;ACtBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,mBAAO,CAAC,+CAAM;AAC7B,mBAAmB,mBAAO,CAAC,sCAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK,4CAA4C,6BAA6B;AAC9E,CAAC;AACD;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA","sources":["webpack://json-tool/./dist/JsonTool.js","webpack://json-tool/./node_modules/tsch/dist/TschType.js","webpack://json-tool/./node_modules/tsch/dist/index.js","webpack://json-tool/./node_modules/tsch/dist/tsch.js","webpack://json-tool/webpack/bootstrap","webpack://json-tool/./dist/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JsonElement = exports.JsonTool = void 0;\nclass JsonTool {\n    constructor(element) {\n        var _a, _b;\n        this.root = document.createElement(\"div\");\n        this.root.style.fontFamily = \"monospace\";\n        this.root.style.marginLeft = \"30px\";\n        this.root.classList.add(\"json-tool\");\n        this.rootObject = null;\n        this.rootElement = null;\n        const iframe = document.createElement(\"iframe\");\n        iframe.style.width = \"100%\";\n        iframe.style.height = \"100%\";\n        iframe.style.overflow = \"scroll\";\n        iframe.style.border = \"0\";\n        element.appendChild(iframe);\n        this.iframeBody = (_b = (iframe.contentDocument || ((_a = iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.document))) === null || _b === void 0 ? void 0 : _b.querySelector(\"body\");\n        this.iframeBody.append(this.root);\n        this.createCss(this.iframeBody);\n        iframe.onload = () => {\n            var _a, _b;\n            this.iframeBody = (_b = (iframe.contentDocument || ((_a = iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.document))) === null || _b === void 0 ? void 0 : _b.querySelector(\"body\");\n            this.iframeBody.append(this.root);\n            this.createCss(this.iframeBody);\n        };\n    }\n    load(schema, value) {\n        this.root.innerHTML = \"\";\n        if (schema.title) {\n            const title = document.createElement(\"h3\");\n            title.textContent = schema.title;\n            JsonElement.addDescription(title, schema.description);\n            this.root.appendChild(title);\n        }\n        this.rootObject = document.createElement(\"div\");\n        this.root.appendChild(this.rootObject);\n        this.rootElement = new JsonElement(this.rootObject, schema, value, () => this.onUpdate());\n    }\n    getValue() {\n        var _a;\n        return (_a = this.rootElement) === null || _a === void 0 ? void 0 : _a.getValue();\n    }\n    onUpdate() {\n        var _a;\n        if (!this.rootObject)\n            return;\n        let number = 1;\n        (_a = this.rootObject) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".line-number\").forEach(e => {\n            e.innerText = number.toString();\n            number++;\n        });\n    }\n    createCss(parent) {\n        const style = document.createElement(\"style\");\n        parent.appendChild(style);\n        style.innerHTML =\n            `\n            .json-tool-btn\n             {\n                border: 1px black solid;\n                cursor: pointer;\n                display: block;\n             }\n              .json-tool-block > .json-tool-btn {\n                margin-top: -17px;\n                margin-left: -40px;\n                position: absolute;\n                opacity: 0;\n              }\n              .json-tool-block:hover > .json-tool-btn\n              {\n                opacity: 1;\n              }\n              .json-tool-value > .json-tool-btn {\n                margin-left: 10px;\n                display: inline-block;\n                position: absolute;\n                opacity :0;\n              }\n              .json-tool-value:hover > .json-tool-btn\n              {\n                opacity :1;\n              }\n              .json-tool-key > .json-tool-btns {\n                margin-left: -32px;\n                display: inline-block;\n                position: absolute;\n                width: 32px;\n                text-align: right;\n                opacity: 0;\n              }\n              .json-tool-key:hover > .json-tool-btns\n              {\n                opacity: 1;\n              }\n\n              .json-tool-key > .json-tool-btns > .json-tool-btn {\n                display: inline-block;\n                margin-right: 2px;\n              }\n              .json-tool-value > .json-tool-type\n              {\n                float:right;\n                opacity: 0;\n                padding:0;\n                margin:0;\n                border:0;\n              }\n              .json-tool-value.json-tool-object > .json-tool-type\n              {\n                float:none;\n                position: absolute;\n                margin-left: 15px;\n              }\n              .json-tool-value:hover > .json-tool-type\n              {\n                opacity: 1;\n              }\n\n              .json-tool-block.opened > .json-tool-key {display: block}\n              .json-tool-block.closed > .json-tool-key {display: none}\n\n              .line-number\n              {\n                position: absolute;\n                left: 0;\n                text-align: right;\n                width: 20px;\n              }\n              .json-tool-value.json-tool-object > .line-number\n              {\n                margin-top: -15px;\n              }\n`;\n    }\n}\nexports.JsonTool = JsonTool;\nclass JsonElement {\n    constructor(element, schema, value, onUpdate) {\n        this.arrayElements = [];\n        this.objectElements = {};\n        this.element = element;\n        this.setStyle();\n        this.schema = schema;\n        this.onUpdate = onUpdate;\n        this.currentValues = {};\n        this.types = schema ? JsonElement.getDefaultAvailableTypes(schema) : [];\n        const actualType = JsonElement.getType(value);\n        this.currentType = \"\";\n        if (actualType !== \"undefined\") {\n            this.currentType = actualType;\n            this.types.push(actualType);\n            this.setCurrentTypeValue(value);\n        }\n        else if (this.schema) {\n            const def = JsonElement.getDefaultValue(this.schema);\n            this.currentType = def.type;\n            this.setCurrentTypeValue(def.value);\n        }\n        this.types = [...new Set(this.types)];\n        this.updateElement();\n    }\n    setCurrentTypeValue(value) {\n        this.currentValues[this.currentType] = typeof value !== \"undefined\" ? JSON.parse(JSON.stringify(value)) : undefined;\n    }\n    static addDescription(element, description) {\n        if (description) {\n            element.title = description;\n            element.style.textDecoration = \"underline dotted\";\n            element.style.cursor = \"help\";\n        }\n    }\n    static getType(value) {\n        if (typeof value === \"undefined\")\n            return \"undefined\";\n        if (Array.isArray(value)) {\n            return \"array\";\n        }\n        else if (value === null) {\n            return \"null\";\n        }\n        else {\n            return typeof value;\n        }\n    }\n    static isInteger(schema) {\n        if (!schema)\n            return false;\n        const arr = Array.isArray(schema.type) ? schema.type : [schema.type];\n        return arr.includes(\"integer\") && !arr.includes(\"number\");\n    }\n    static getDefaultAvailableTypes(schema) {\n        let types = Array.isArray(schema.type) ? [...schema.type] : [schema.type];\n        types = types.map(t => {\n            if (t === \"integer\")\n                return \"number\";\n            return t;\n        });\n        return types;\n    }\n    static getDefaultValue(schema) {\n        const availableTypes = this.getDefaultAvailableTypes(schema);\n        if (schema.default) {\n            return { type: this.getType(schema.default), value: schema.default };\n        }\n        else {\n            return { type: availableTypes[0], value: this.getDefaultValueForType(schema, availableTypes[0]) };\n        }\n    }\n    static getDefaultValueForType(schema, type) {\n        var _a, _b, _c;\n        if (type === \"number\") {\n            return this.isInteger(schema) ? Math.ceil((_a = schema === null || schema === void 0 ? void 0 : schema.minimum) !== null && _a !== void 0 ? _a : 0) : (_b = schema === null || schema === void 0 ? void 0 : schema.minimum) !== null && _b !== void 0 ? _b : 0;\n        }\n        else if (type === \"string\") {\n            if (schema === null || schema === void 0 ? void 0 : schema.enum)\n                return schema.enum[0];\n            if ((schema === null || schema === void 0 ? void 0 : schema.format) === \"color\")\n                return \"#000000\";\n            if ((schema === null || schema === void 0 ? void 0 : schema.format) === \"date\")\n                return Date.now();\n            return \"\";\n        }\n        else if (type === \"boolean\") {\n            return false;\n        }\n        else if (type === \"array\") {\n            return [];\n        }\n        else if (type === \"object\") {\n            const obj = {};\n            if (schema === null || schema === void 0 ? void 0 : schema.properties) {\n                for (const required of (_c = schema.required) !== null && _c !== void 0 ? _c : []) {\n                    if (!schema.properties.hasOwnProperty(required))\n                        continue;\n                    const def = this.getDefaultValue(schema.properties[required]);\n                    obj[required] = def.value;\n                }\n            }\n            return obj;\n        }\n    }\n    updateElement() {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        this.objectElements = {};\n        this.arrayElements = [];\n        this.element.innerHTML = \"\";\n        this.element.style.display = \"inline-block\";\n        this.element.classList.remove(\"json-tool-object\");\n        this.element.append(this.createLineNumber());\n        const type = this.currentType;\n        const val = (_a = this.currentValues[type]) !== null && _a !== void 0 ? _a : (this.currentValues[type] = JsonElement.getDefaultValueForType(this.schema, type));\n        if (this.types.length > 1) {\n            const select = document.createElement(\"select\");\n            select.classList.add(\"json-tool-type\");\n            for (const t of this.types) {\n                const option = document.createElement(\"option\");\n                option.innerText = t;\n                select.append(option);\n            }\n            this.element.append(select);\n        }\n        if (type === \"object\") {\n            this.element.append(this.createLineNumber(true));\n            this.element.style.display = \"block\";\n            this.element.classList.add(\"json-tool-object\");\n            this.element.append(\"{\");\n            const object = this.createBlock();\n            this.element.append(object);\n            this.element.append(\"}\");\n            this.element.append(this.createLineNumber());\n            for (const key in val !== null && val !== void 0 ? val : {}) {\n                const obj = this.createObjectKeyValuePair(key, ((_b = this.schema) === null || _b === void 0 ? void 0 : _b.properties) ? this.schema.properties[key] : null, val[key]);\n                object.append(obj);\n                const buttons = document.createElement(\"div\");\n                obj.prepend(buttons);\n                buttons.classList.add(\"json-tool-btns\");\n                if (((_c = this.schema) === null || _c === void 0 ? void 0 : _c.properties) && !this.schema.properties.hasOwnProperty(key)) {\n                    const remove = document.createElement(\"div\");\n                    remove.classList.add(\"json-tool-btn\");\n                    remove.innerText = \"X\";\n                    buttons.append(remove);\n                }\n                else if (!((_e = (_d = this.schema) === null || _d === void 0 ? void 0 : _d.required) === null || _e === void 0 ? void 0 : _e.includes(key))) {\n                    const remove = document.createElement(\"div\");\n                    remove.classList.add(\"json-tool-btn\");\n                    remove.innerText = \"∽\";\n                    buttons.append(remove);\n                }\n            }\n            if ((_f = this.schema) === null || _f === void 0 ? void 0 : _f.properties) {\n                for (const key in this.schema.properties) {\n                    if (val === null || val === void 0 ? void 0 : val.hasOwnProperty(key))\n                        continue;\n                    if ((_h = (_g = this.schema) === null || _g === void 0 ? void 0 : _g.required) === null || _h === void 0 ? void 0 : _h.includes(key)) {\n                        const obj = this.createObjectKeyValuePair(key, this.schema.properties[key]);\n                        object.append(obj);\n                    }\n                    else {\n                        const obj = this.createObjectKeyValuePair(key, null);\n                        object.append(obj);\n                        obj.style.textDecoration = \"line-through 2px\";\n                        const buttons = document.createElement(\"div\");\n                        obj.prepend(buttons);\n                        buttons.classList.add(\"json-tool-btns\");\n                        const add = document.createElement(\"div\");\n                        add.classList.add(\"json-tool-btn\");\n                        add.innerText = \"≁\";\n                        buttons.append(add);\n                    }\n                }\n            }\n        }\n        else if (type === \"array\") {\n            this.element.append(this.createLineNumber(true));\n            this.element.style.display = \"block\";\n            this.element.classList.add(\"json-tool-object\");\n            this.element.append(\"[\");\n            const array = this.createBlock();\n            this.element.append(array);\n            const add = document.createElement(\"div\");\n            add.classList.add(\"json-tool-btn\");\n            add.innerText = \"+\";\n            this.element.append(add);\n            add.onclick = () => {\n                var _a;\n                const val = [...this.getValue()];\n                console.log(JSON.stringify(val));\n                if ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.items) {\n                    const defaultValue = JsonElement.getDefaultValue(this.schema.items).value;\n                    console.log(this.schema.items, defaultValue);\n                    val.push(defaultValue);\n                    this.currentType = type;\n                    this.setCurrentTypeValue(val);\n                    this.updateElement();\n                }\n            };\n            this.element.append(\"]\");\n            this.element.append(this.createLineNumber());\n            const arr = val !== null && val !== void 0 ? val : [];\n            for (let i = 0; i < arr.length; i++) {\n                const obj = this.createObjectKeyValuePair(i, ((_j = this.schema) === null || _j === void 0 ? void 0 : _j.items) ? this.schema.items : null, val[i]);\n                array.append(obj);\n                const buttons = document.createElement(\"div\");\n                obj.prepend(buttons);\n                buttons.classList.add(\"json-tool-btns\");\n                const remove = document.createElement(\"div\");\n                remove.classList.add(\"json-tool-btn\");\n                remove.innerText = \"X\";\n                buttons.append(remove);\n                const up = document.createElement(\"div\");\n                up.classList.add(\"json-tool-btn\");\n                up.innerText = \"ᐃ\";\n                buttons.append(up);\n                const down = document.createElement(\"div\");\n                down.classList.add(\"json-tool-btn\");\n                down.innerText = \"ᐁ\";\n                buttons.append(down);\n            }\n        }\n        else {\n            this.element.append(`[${type}]`);\n        }\n        if (this.onUpdate)\n            this.onUpdate();\n    }\n    createLineNumber(overrideMargin = false) {\n        const lineNumber = document.createElement(\"div\");\n        lineNumber.classList.add(\"line-number\");\n        if (overrideMargin)\n            lineNumber.style.marginTop = \"0\";\n        return lineNumber;\n    }\n    createBlock() {\n        const block = document.createElement(\"div\");\n        block.classList.add(\"json-tool-block\");\n        block.style.paddingLeft = \"25px\";\n        block.style.borderLeft = \"1px dashed black\";\n        block.style.marginLeft = \"3px\";\n        let opened = false;\n        const collapse = document.createElement(\"div\");\n        block.append(collapse);\n        collapse.classList.add(\"json-tool-btn\");\n        const toggle = () => {\n            opened = !opened;\n            collapse.innerText = opened ? \"ᐯ\" : \"ᐳ\";\n            block.classList.remove(\"opened\", \"closed\");\n            block.classList.add(opened ? \"opened\" : \"closed\");\n        };\n        collapse.onclick = toggle;\n        toggle();\n        return block;\n    }\n    createObjectKeyValuePair(key, schema, value) {\n        var _a;\n        const parent = document.createElement(\"div\");\n        const originalKey = key;\n        if (typeof key === \"number\") {\n            key = (schema === null || schema === void 0 ? void 0 : schema.title) ? `${schema.title} ${key}` : key;\n        }\n        else {\n            key = (_a = schema === null || schema === void 0 ? void 0 : schema.title) !== null && _a !== void 0 ? _a : key;\n        }\n        const title = document.createElement(\"span\");\n        title.innerText = key.toString();\n        JsonElement.addDescription(title, schema === null || schema === void 0 ? void 0 : schema.description);\n        parent.append(title);\n        parent.classList.add(\"json-tool-key\");\n        parent.append(\": \");\n        if (schema || value) {\n            const valueElement = document.createElement(\"div\");\n            const element = new JsonElement(valueElement, schema, value, () => this.onUpdate && this.onUpdate());\n            if (this.currentType === \"array\")\n                this.arrayElements.push(element);\n            else if (this.currentType === \"object\")\n                this.objectElements[originalKey] = element;\n            parent.append(valueElement);\n        }\n        return parent;\n    }\n    changeType(type) {\n        var _a;\n        this.currentType = type;\n        if (!this.currentValues.hasOwnProperty(type)) {\n            if (typeof ((_a = this.schema) === null || _a === void 0 ? void 0 : _a.default) !== \"undefined\" && JsonElement.getType(this.schema.default) === type)\n                this.setCurrentTypeValue(this.schema.default);\n            else\n                this.setCurrentTypeValue(JsonElement.getDefaultValueForType(this.schema, type));\n        }\n        this.updateElement();\n    }\n    setStyle() {\n        this.element.style.whiteSpace = \"pre\";\n        this.element.classList.add(\"json-tool-value\");\n    }\n    getValue() {\n        var _a;\n        let val;\n        if (this.currentType === \"array\") {\n            val = this.arrayElements.map(e => e.getValue());\n        }\n        else if (this.currentType === \"object\") {\n            const obj = {};\n            for (const key in this.objectElements) {\n                obj[key] = this.objectElements[key].getValue();\n            }\n            val = obj;\n        }\n        else {\n            val = (_a = this.currentValues[this.currentType]) !== null && _a !== void 0 ? _a : JsonElement.getDefaultValueForType(this.schema, this.currentType);\n        }\n        this.currentValues[this.currentType] = val;\n        return val;\n    }\n}\nexports.JsonElement = JsonElement;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TschArray = exports.TschObject = exports.TschUnion = exports.TschBoolean = exports.TschNumber = exports.TschString = exports.TschType = void 0;\nclass TschType {\n    constructor(type) {\n        this._ts = null; //_ts is only used by Typescript for type inference, and so actually doesn't need to be assigned\n        this._type = type;\n        this._title = null;\n        this._description = null;\n        this._default = null;\n    }\n    union(other) {\n        return new TschUnion(this, other);\n    }\n    optional() {\n        return new TschUnion(this, new TschType(\"undefined\"));\n    }\n    nullable() {\n        return new TschUnion(this, new TschType(\"null\"));\n    }\n    _baseClone() {\n        return new TschType(this._type);\n    }\n    _clone() {\n        const clone = this._baseClone();\n        clone._title = this._title;\n        clone._description = this._description;\n        clone._default = this._default;\n        return clone;\n    }\n    title(title) {\n        const clone = this._clone();\n        clone._title = title;\n        return clone;\n    }\n    description(descriptin) {\n        const clone = this._clone();\n        clone._description = descriptin;\n        return clone;\n    }\n    default(defaultValue) {\n        const clone = this._clone();\n        clone._default = defaultValue;\n        return clone;\n    }\n    getJsonSchemaProperty() {\n        const schema = {\n            \"type\": this._type\n        };\n        if (this._title)\n            schema.title = this._title;\n        if (this._description)\n            schema.description = this._description;\n        if (this._default)\n            schema.default = this._default;\n        return schema;\n    }\n    _isOptional() { return false; }\n    _isNullable() { return false; }\n}\nexports.TschType = TschType;\nclass TschString extends TschType {\n    constructor() {\n        super(\"string\");\n        this._format = null;\n        this._enum = null;\n        this._minLength = null;\n        this._maxLength = null;\n    }\n    _baseClone() {\n        return new TschString();\n    }\n    _clone() {\n        const clone = super._clone();\n        clone._format = this._format;\n        clone._enum = this._enum;\n        clone._minLength = this._minLength;\n        clone._maxLength = this._maxLength;\n        return clone;\n    }\n    getJsonSchemaProperty() {\n        const schema = super.getJsonSchemaProperty();\n        if (this._format)\n            schema.format = this._format;\n        if (this._enum)\n            schema.enum = this._enum;\n        if (this._minLength)\n            schema.minLength = this._minLength;\n        if (this._maxLength)\n            schema.maxLength = this._maxLength;\n        return schema;\n    }\n    minLength(min) {\n        const clone = this._clone();\n        clone._minLength = min;\n        return clone;\n    }\n    maxLength(max) {\n        const clone = this._clone();\n        clone._maxLength = max;\n        return clone;\n    }\n    enumeration(enumeration) {\n        const clone = this._clone();\n        clone._enum = [...enumeration];\n        return clone;\n    }\n    format(format) {\n        const clone = this._clone();\n        clone._format = format;\n        return clone;\n    }\n    color() {\n        return this.format(\"color\");\n    }\n    date() {\n        return this.format(\"date\");\n    }\n    email() {\n        return this.format(\"email\");\n    }\n    password() {\n        return this.format(\"password\");\n    }\n    textarea() {\n        return this.format(\"textarea\");\n    }\n    url() {\n        return this.format(\"url\");\n    }\n}\nexports.TschString = TschString;\nclass TschNumber extends TschType {\n    constructor() {\n        super(\"number\");\n        this._integer = false;\n        this._min = null;\n        this._max = null;\n    }\n    _baseClone() {\n        return new TschNumber();\n    }\n    _clone() {\n        const clone = super._clone();\n        clone._integer = this._integer;\n        clone._min = this._min;\n        clone._max = this._max;\n        return clone;\n    }\n    integer() {\n        const clone = this._clone();\n        clone._integer = true;\n        return clone;\n    }\n    min(min) {\n        const clone = this._clone();\n        clone._min = min;\n        return clone;\n    }\n    max(max) {\n        const clone = this._clone();\n        clone._max = max;\n        return clone;\n    }\n    getJsonSchemaProperty() {\n        const schema = super.getJsonSchemaProperty();\n        if (this._integer)\n            schema.type = \"integer\";\n        if (this._min !== null)\n            schema.minimum = this._min;\n        if (this._max !== null)\n            schema.maximum = this._max;\n        return schema;\n    }\n}\nexports.TschNumber = TschNumber;\nclass TschBoolean extends TschType {\n    constructor() {\n        super(\"boolean\");\n    }\n    _baseClone() {\n        return new TschBoolean();\n    }\n    _clone() {\n        const clone = super._clone();\n        return clone;\n    }\n}\nexports.TschBoolean = TschBoolean;\nclass TschUnion extends TschType {\n    constructor(type1, type2) {\n        super(`union_${type1._type}_${type2._type}`);\n        this.type1 = type1;\n        this.type2 = type2;\n    }\n    _baseClone() {\n        return new TschUnion(this.type1._clone(), this.type2._clone());\n    }\n    _clone() {\n        const clone = super._clone();\n        clone.type1 = this.type1._clone();\n        clone.type2 = this.type2._clone();\n        return clone;\n    }\n    getJsonSchemaProperty() {\n        var _a, _b, _c, _d;\n        const schema1 = this.type1._type === \"undefined\" ? {} : this.type1.getJsonSchemaProperty();\n        const schema2 = this.type2._type === \"undefined\" ? {} : this.type2.getJsonSchemaProperty();\n        const combined = Object.assign(Object.assign({}, schema1), schema2);\n        combined.type = [...(Array.isArray(schema1.type) ? schema1.type : [schema1.type]), ...(Array.isArray(schema2.type) ? schema2.type : [schema2.type])].filter(t => !!t && t !== \"undefined\");\n        if (combined.type.length < 2)\n            combined.type = combined.type[0];\n        if (schema1.properties && schema2.properties) {\n            combined.properties = Object.assign(Object.assign({}, ((_a = schema1.properties) !== null && _a !== void 0 ? _a : {})), ((_b = schema2.properties) !== null && _b !== void 0 ? _b : {}));\n            if (!!schema1.required && !!schema2.required)\n                combined.required = schema1.required.filter((f) => { var _a; return (_a = schema2.required) === null || _a === void 0 ? void 0 : _a.includes(f); });\n            else\n                combined.required = (_d = (_c = schema1.required) !== null && _c !== void 0 ? _c : schema2.required) !== null && _d !== void 0 ? _d : [];\n        }\n        if (this._title)\n            combined.title = this._title;\n        if (this._description)\n            combined.description = this._description;\n        if (this._default)\n            combined.default = this._default;\n        return combined;\n    }\n    _isNullable() {\n        return this.type1._type === \"null\" || this.type2._type === \"null\" || this.type1._isNullable() || this.type2._isNullable();\n    }\n    _isOptional() {\n        return this.type1._type === \"undefined\" || this.type2._type === \"undefined\" || this.type1._isOptional() || this.type2._isOptional();\n    }\n}\nexports.TschUnion = TschUnion;\nclass TschObject extends TschType {\n    constructor(shape) {\n        super(\"object\");\n        this.shape = shape;\n    }\n    _baseClone() {\n        return new TschObject(this.shape);\n    }\n    _clone() {\n        const clone = super._clone();\n        clone.shape = this.shape;\n        return clone;\n    }\n    getJsonSchemaProperty() {\n        const schema = super.getJsonSchemaProperty();\n        schema.required = Object.keys(this.shape).filter(k => !this.shape[k]._isOptional());\n        schema.properties = {};\n        for (const key in this.shape) {\n            schema.properties[key] = this.shape[key].getJsonSchemaProperty();\n        }\n        return schema;\n    }\n}\nexports.TschObject = TschObject;\nclass TschArray extends TschType {\n    constructor(elementType) {\n        super(\"array\");\n        this.elementType = elementType;\n        this._format = null;\n        this._unique = false;\n    }\n    _baseClone() {\n        return new TschArray(this.elementType);\n    }\n    _clone() {\n        const clone = super._clone();\n        clone.elementType = this.elementType;\n        clone._format = this._format;\n        clone._unique = this._unique;\n        return clone;\n    }\n    getJsonSchemaProperty() {\n        const schema = super.getJsonSchemaProperty();\n        schema.items = this.elementType.getJsonSchemaProperty();\n        if (this._format)\n            schema.format = this._format;\n        if (this._unique)\n            schema.uniqueItems = this._unique;\n        return schema;\n    }\n    table() {\n        const clone = this._clone();\n        clone._format = \"table\";\n        return clone;\n    }\n    unique() {\n        const clone = this._clone();\n        clone._unique = true;\n        return clone;\n    }\n}\nexports.TschArray = TschArray;\n//# sourceMappingURL=TschType.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tsch = void 0;\nconst tsch = __importStar(require(\"./tsch\"));\nexports.tsch = tsch;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.array = exports.object = exports.boolean = exports.number = exports.string = void 0;\nconst TschType_1 = require(\"./TschType\");\nfunction string() { return new TschType_1.TschString(); }\nexports.string = string;\nfunction number() { return new TschType_1.TschNumber(); }\nexports.number = number;\nfunction boolean() { return new TschType_1.TschBoolean(); }\nexports.boolean = boolean;\nfunction object(shape) {\n    return new TschType_1.TschObject(shape);\n}\nexports.object = object;\nfunction array(elementType) {\n    return new TschType_1.TschArray(elementType);\n}\nexports.array = array;\n//# sourceMappingURL=tsch.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tsch_1 = require(\"tsch\");\nconst JsonTool_1 = require(\"./JsonTool\");\nwindow.JsonTool = JsonTool_1.JsonTool;\nconst person = tsch_1.tsch.object({\n    name: tsch_1.tsch.string().description(\"First and Last Name\").minLength(4).default(\"Jeremy Dorn\"),\n    age: tsch_1.tsch.number().integer().default(25).min(18).max(99).optional().title(\"Age\").union(tsch_1.tsch.string()),\n    favorite_color: tsch_1.tsch.string().color().title(\"favorite color\").default(\"#ffa500\"),\n    gender: tsch_1.tsch.string().enumeration([\"male\", \"female\", \"other\"]),\n    date: tsch_1.tsch.string().date(),\n    location: tsch_1.tsch.object({\n        city: tsch_1.tsch.string().default(\"San Francisco\"),\n        state: tsch_1.tsch.string().default(\"CA\")\n    }).title(\"Location\"),\n    pets: tsch_1.tsch.array(tsch_1.tsch.object({\n        type: tsch_1.tsch.string().enumeration([\"cat\", \"dog\", \"bird\", \"reptile\", \"other\"]).default(\"dog\"),\n        name: tsch_1.tsch.string()\n    }).title(\"Pet\")).unique().table().default([{ type: \"dog\", name: \"Walter\" }])\n}).title(\"Person\");\nconst personJsonSchema = person.getJsonSchemaProperty();\nconst rootElement = document.querySelector(\"#root\");\nif (rootElement) {\n    const tool = new JsonTool_1.JsonTool(rootElement);\n    tool.load(personJsonSchema, { age: 2 });\n    window.getValue = () => tool.getValue();\n}\n"],"names":[],"sourceRoot":""}